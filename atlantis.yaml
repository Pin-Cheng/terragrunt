version: 3

projects:
- name: vpc
  dir: infra/vpc
  autoplan:
    when_modified: ["**/*.hcl", "**/*.tf*"]
  vault:
    url: http://vault.example.com:8200
    auth:
      method: token
      token: "{{ file `~/.vault-token` }}"

# - name: central-iam-roles
#   dir: central/basic/iam-roles
#   autoplan:
#     when_modified: ["**/*.hcl", "**/*.tf*"]
#   workflow: central

# - name: central-iam-users
#   dir: central/basic/iam-users
#   autoplan:
#     when_modified: ["**/*.hcl", "**/*.tf*"]
#   workflow: central

# - name: development-iam-roles
#   dir: development/basic/iam-roles
#   autoplan:
#     when_modified: ["**/*.hcl", "**/*.tf*"]
#   workflow: development

# - name: staging-iam-roles
#   dir: staging/basic/iam-roles
#   autoplan:
#     when_modified: ["**/*.hcl", "**/*.tf*"]
#   workflow: staging

# - name: production-iam-roles
#   dir: production/basic/iam-roles
#   autoplan:
#     when_modified: ["**/*.hcl", "**/*.tf*"]
#   workflow: production